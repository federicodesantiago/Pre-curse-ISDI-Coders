let questions = [[
    {
      htmlID: "letterA",
      letter: "Con la A",
      answer: "abducir",
      status: 0,
      question: "Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien",
    },
    {
      htmlID: "letterB",
      letter: "Con la B",
      answer: "bingo",
      status: 0,
      question: "Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso",
    },
    {
      htmlID: "letterC",
      letter: "Con la C",
      answer: "churumbel",
      status: 0,
      question: "Niño, crío, bebé",
    },
    {
      htmlID: "letterD",
      letter: "Con la D",
      answer: "diarrea",
      status: 0,
      question:"Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida",
    },
    {
      htmlID: "letterE",
      letter: "Con la E",
      answer: "ectoplasma",
      status: 0,
      question: "Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación",
    },
    {
      htmlID: "letterF",
      letter: "Con la F",
      answer: "fácil",
      status: 0,
      question: "Que no requiere gran esfuerzo, capacidad o dificultad",
    },
    {
      htmlID: "letterG",
      answer: "galaxia",
      status: 0,
      question: "Conjunto enorme de estrellas, polvo interestelar, gases y partículas",
    },
    {
      htmlID: "letterH",
      letter: "Con la H",
      answer: "harakiri",
      status: 0,
      question: "Suicidio ritual japonés por desentrañamiento",
    },
    {
      htmlID: "letterI",
      letter: "Con la I",
      answer: "iglesia",
      status: 0,
      question: "Templo cristiano",
    },
    {
      htmlID: "letterJ",
      letter: "Con la J",
      answer: "jabali",
      status: 0,
      question: "Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba",
    },
    {
      htmlID: "letterK",
      letter: "Con la K",
      answer: "kamikaze",
      status: 0,
      question: "Persona que se juega la vida realizando una acción temeraria",
    },
    {
      htmlID: "letterL",
      letter: "Con la L",
      answer: "licantropo",
      status: 0,
      question: "Hombre lobo",
    },
    {
      htmlID: "letterM",
      letter: "Con la M",
      answer: "misantropo",
      status: 0,
      question: "Persona que huye del trato con otras personas o siente gran aversión hacia ellas",
    },
    {
      htmlID: "letterN",
      letter: "Con la N",
      answer: "necedad",
      status: 0,
      question: "Demostración de poca inteligencia",
    },
    {
      htmlID: "letterÑ",
      letter: "Contiene la Ñ",
      answer: "señal",
      status: 0,
      question: "Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.",
    },
    {
      htmlID: "letterO",
      letter: "Con la O",
      answer: "orco",
      status: 0,
      question: "Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien",
    },
    {
      htmlID: "letterP",
      letter: "Con la P",
      answer: "protoss",
      status: 0,
      question: "Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft",
    },
    {
      htmlID: "letterQ",
      letter: "Con la Q",
      answer: "queso",
      status: 0,
      question: "Producto obtenido por la maduración de la cuajada de la leche",
    },
    { 
      htmlID: "letterR",
      letter: "Con la R",
      answer: "raton",
      status: 0,
      question: "Roedor"
    },
    {
      htmlID: "letterS",
      letter: "Con la S",
      answer: "stackoverflow",
      status: 0,
      question: "Comunidad salvadora de todo desarrollador informático",
    },
    {
      htmlID: "letterT",
      letter: "Con la T",
      answer: "terminator",
      status: 0,
      question: "Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984",
    },
    {
      htmlID: "letterU",
      letter: "Con la U",
      answer: "unamuno",
      status: 0,
      question: "Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914",
    },
    {
      htmlID: "letterV",
      letter: "Con la V",
      answer: "vikingos",
      status: 0,
      question: "Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa",
    },
    {
      htmlID: "letterW",
      letter: "Contiene la W",
      answer: "sandwich",
      status: 0,
      question: "Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso",
    },
    {
      htmlID: "letterX",
      letter: "Contiene la X",
      answer: "botox",
      status: 0,
      question: "Toxina bacteriana utilizada en cirujía estética",
    },
    {
      htmlID: "letterY",
      letter: "Contiene la Y",
      answer: "peyote",
      status: 0,
      question: "Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos",
    },
    {
      htmlID: "letterZ",
      letter: "Con la Z",
      answer: "zen",
      status: 0,
      question: "Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional",
    },
  ], [{
    htmlID: "letterA",
    letter: "Con la A",
    answer: "arteria",
    status: 0,
    question: "Conducto por donde va la sangre desde el corazón a las demás partes del cuerpo.",
  },
  {
    htmlID: "letterB",
    letter: "Con la B",
    answer: "bitácora",
    status: 0,
    question: "En los barcos, especie de armario que está fijo en la cubierta y situado muy cerca del timón donde se pone la brújula.",
  },
  {
    htmlID: "letterC",
    letter: "Con la C",
    answer: "cicerone",
    status: 0,
    question: "Persona que sirve a otras de guía y les va enseñando y explicando lugares y cosas interesantes.",
  },
  {
    htmlID: "letterD",
    letter: "Con la D",
    answer: "diplomacia",
    status: 0,
    question:"Actividad que realiza un país para mantener buenas relaciones con el resto de países.",
  },
  {
    htmlID: "letterE",
    letter: "Con la E",
    answer: "equinoccio",
    status: 0,
    question: "Cada uno de los dos momentos del año en que, por estar el Sol sobre el ecuador, los días y las noches duran lo mismo en toda la Tierra.",
  },
  {
    htmlID: "letterF",
    letter: "Con la F",
    answer: "fisiología",
    status: 0,
    question: "Ciencia que estudia las funciones de los órganos de los seres vivos.",
  },
  {
    htmlID: "letterG",
    letter: "Con la G",
    answer: "glaciación",
    status: 0,
    question: "Cada una de las épocas, hace miles de años, en las que hacía mucho más frío que en la actualidad y gran parte de la Tierra estaba cubierta por hielo.",
  },
  {
    htmlID: "letterH",
    letter: "Con la H",
    answer: "hinojo",
    status: 0,
    question: "Planta de flores amarillas que se usa como condimento, por el sabor de sus frutos parecido al del anís, y también en medicina porque ayuda a hacer la digestión.",
  },
  {
    htmlID: "letterI",
    letter: "Con la I",
    answer: "ingenio",
    status: 0,
    question: "Capacidad para inventar cosas o para pensar y hablar con gracia.",
  },
  {
    htmlID: "letterJ",
    letter: "Con la J",
    answer: "jade",
    status: 0,
    question: "Mineral muy duro, de color verde o blanquecino, que se emplea en joyería y para hacer objetos de adorno",
  },
  {
    htmlID: "letterK",
    letter: "Con la K",
    answer: "kamikaze",
    status: 0,
    question: "Piloto japonés que se lanzaba en su avión contra un barco u otro objetivo enemigo para destruirlo, aunque muriera al hacerlo",
  },
  {
    htmlID: "letterL",
    letter: "Con la L",
    answer: "lema",
    status: 0,
    question: "Frase que expresa la forma en que debe actuar una persona.",
  },
  {
    htmlID: "letterM",
    letter: "Con la M",
    answer: "miriñaque",
    status: 0,
    question: "Prenda rígida o almidonada, a veces con aros, que antiguamente llevaban las mujeres bajo la falda para darle vuelo.",
  },
  {
    htmlID: "letterN",
    letter: "Con la N",
    answer: "ninfa",
    status: 0,
    question: "Demostración de poca inteligencia",
  },
  {
    htmlID: "letterÑ",
    letter: "Con la Ñ",
    answer: "ñandú",
    status: 0,
    question: "Ave parecida al avestruz, pero más pequeña y con tres dedos en cada pie..",
  },
  {
    htmlID: "letterO",
    letter: "Con la O",
    answer: "onomatopeya",
    status: 0,
    question: "Palabra que imita el sonido que hace un animal o una cosa.",
  },
  {
    htmlID: "letterP",
    letter: "Con la P",
    answer: "pabellón",
    status: 0,
    question: "Edificio que es parte de un conjunto, de otro edificio más grande, o que está muy cerca de él.",
  },
  {
    htmlID: "letterQ",
    letter: "Con la Q",
    answer: "quimera",
    status: 0,
    question: "Cosa que, sin ser real, alguien la imagina como posible o verdadera.",
  },
  { 
    htmlID: "letterR",
    letter: "Con la R",
    answer: "rémora",
    status: 0,
    question: "Pez marino que tiene una especie de ventosa en la cabeza con la que se fija a otros peces más grandes."
  },
  {
    htmlID: "letterS",
    letter: "Con la S",
    answer: "sotana",
    status: 0,
    question: "Traje negro y largo parecido a una túnica que llevan algunos curas y religiosos",
  },
  {
    htmlID: "letterT",
    letter: "Con la T",
    answer: "testamento",
    status: 0,
    question: "Escrito o declaración de palabra en el que alguien dice lo que quiere que se haga después de su muerte, sobre todo con su dinero o sus pertenencias.",
  },
  {
    htmlID: "letterU",
    letter: "Con la U",
    answer: "urbanización",
    status: 0,
    question: "Conjunto de casas y edificios que suelen ser parecidos y donde hay tiendas, parques y otros espacios que necesitan las personas que allí viven.",
  },
  {
    htmlID: "letterV",
    letter: "Con la V",
    answer: "vencejo",
    status: 0,
    question: "Pájaro de color casi siempre negro o pardo que tiene el pico delgado, las alas muy largas y la cola en forma de horquilla. Vuela muy rápido.",
  },
  {
    htmlID: "letterW",
    letter: "Con la W",
    answer: "whisky",
    status: 0,
    question: "Licor con mucho alcohol que se hace al fermentar la cebada o algunos otros cereales.",
  },
  {
    htmlID: "letterX",
    letter: "Con la X",
    answer: "xilografía",
    status: 0,
    question: "Manera de hacer grabados sobre madera, dejando vacías las partes que deben quedar blancas en el dibujo.",
  },
  {
    htmlID: "letterY",
    letter: "Con la Y",
    answer: "yak",
    status: 0,
    question: "Mamífero de gran tamaño parecido a un toro, pero con el cuero cubierto de un abundante pelo que lo protege del frío.",
  },
  {
    htmlID: "letterZ",
    letter: "Con la Z",
    answer: "zócalo",
    status: 0,
    question: "Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional",
  },], [{
    htmlID: "letterA",
    letter: "Con la A",
    answer: "ascua",
    status: 0,
    question: "Trozo de cualquier material ardiendo pero sin llama.",
  },
  {
    htmlID: "letterB",
    letter: "Con la B",
    answer: "bilis",
    status: 0,
    question: "Líquido amargo de color amarillo verdoso producido por el hígado y que ayuda a la digestión de los alimentos.",
  },
  {
    htmlID: "letterC",
    letter: "Con la C",
    answer: "cubismo",
    status: 0,
    question: "Estilo de pintura que comenzó en Francia a principios de este siglo y que se caracteriza por representar figuras y objetos mediante formas geométricas.",
  },
  {
    htmlID: "letterD",
    letter: "Con la D",
    answer: "diéresis",
    status: 0,
    question:"Signo ortográfico que se coloca encima de la u para indicar que esta letra ha de pronunciarse.",
  },
  {
    htmlID: "letterE",
    letter: "Con la E",
    answer: "estría",
    status: 0,
    question: "Línea que se forma en la piel cuando ésta se ha estirado excesivamente.",
  },
  {
    htmlID: "letterF",
    letter: "Con la F",
    answer: "fonema",
    status: 0,
    question: "Sonido de una letra.",
  },
  {
    htmlID: "letterG",
    letter: "Con la G",
    answer: "gaucho",
    status: 0,
    question: "Se dice de las personas que viven en las grandes llanuras de Argentina y Uruguay y llevan el ganado de un lado a otro.",
  },
  {
    htmlID: "letterH",
    letter: "Con la H",
    answer: "himno",
    status: 0,
    question: "Poesía o composición musical en alabanza de alguien o algo, como la que se dedica a un país.",
  },
  {
    htmlID: "letterI",
    letter: "Con la I",
    answer: "imán",
    status: 0,
    question: "Mineral capaz de atraer el hierro u otros metales.",
  },
  {
    htmlID: "letterJ",
    letter: "Con la J",
    answer: "jabato",
    status: 0,
    question: "Cría del jabalí.",
  },
  {
    htmlID: "letterK",
    letter: "Con la K",
    answer: "kamikaze",
    status: 0,
    question: "Persona que se juega la vida realizando una acción temeraria",
  },
  {
    htmlID: "letterL",
    letter: "Con la L",
    answer: "lombriz",
    status: 0,
    question: "Gusano muy largo de color rojizo que se alimenta de sustancias que hay en la tierra.",
  },
  {
    htmlID: "letterM",
    letter: "Con la M",
    answer: "mudéjar",
    status: 0,
    question: "Nombre que se daba a los musulmanes que vivían en los reinos cristianos de la península ibérica.",
  },
  {
    htmlID: "letterN",
    letter: "Con la N",
    answer: "nogal",
    status: 0,
    question: "Árbol grande con la corteza lisa y de color gris cuyo fruto es la nuez.",
  },
  {
    htmlID: "letterÑ",
    letter: "Con la Ñ",
    answer: "ñoño",
    status: 0,
    question: "Cursi o demasiado delicado.",
  },
  {
    htmlID: "letterO",
    letter: "Con la O",
    answer: "ocre",
    status: 0,
    question: "Se dice del color que es una mezcla de amarillo y marrón.",
  },
  {
    htmlID: "letterP",
    letter: "Con la P",
    answer: "protocolo",
    status: 0,
    question: "Conjunto de reglas o ceremonias que hay que cumplir en los actos oficiales o solemnes.",
  },
  {
    htmlID: "letterQ",
    letter: "Con la Q",
    answer: "quechua",
    status: 0,
    question: "Pueblo indio que habita en Perú y que vivía allí antes del descubrimiento de América.",
  },
  { 
    htmlID: "letterR",
    letter: "Con la R",
    answer: "repisa",
    status: 0, 
    question: "Tabla o elemento similar que se coloca contra la pared para poner en ella objetos."
  },
  {
    htmlID: "letterS",
    letter: "Con la S",
    answer: "solsticio",
    status: 0,
    question: "Nombre de dos momentos del año que marcan el inicio del verano y el comienzo del invierno.",
  },
  {
    htmlID: "letterT",
    letter: "Con la T",
    answer: "troposfera",
    status: 0,
    question: "Capa de la atmósfera más cercana a la superficie de la Tierra, en la que tienen lugar los fenómenos del tiempo meteorológico.",
  },
  {
    htmlID: "letterU",
    letter: "Con la U",
    answer: "utopía",
    status: 0,
    question: "Algo que es bueno y que deseamos pero que es imposible o muy difícil de realizar.",
  },
  {
    htmlID: "letterV",
    letter: "Con la V",
    answer: "visera",
    status: 0,
    question: "Parte hacia afuera que tienen las gorras por delante y que sirve para que el sol no nos haga daño en los ojos.",
  },
  {
    htmlID: "letterW",
    letter: "Con la W",
    answer: "western",
    status: 0,
    question: "Película del oeste americano.",
  },
  {
    htmlID: "letterX",
    letter: "Con la X",
    answer: "xenófobia",
    status: 0,
    question: "Odio o antipatía hacia los extranjeros.",
  },
  {
    htmlID: "letterY",
    letter: "Con la Y",
    answer: "yodo",
    status: 0,
    question: "Elemento químico de color oscuro que se encuentra en el suelo en forma de sales, así como en las algas y otros animales marinos.",
  },
  {
    htmlID: "letterZ",
    letter: "Con la Z",
    answer: "zarzal",
    status: 0,
    question: "Lugar donde hay muchas zarzas.",
  },]];

let answerInput = document.getElementById("answerInput").value;
const buttonStart = document.getElementById("boton_start");
const submit = document.getElementById("boton_submit");
const pasapalabra = document.getElementById("boton_pasapalabra");
let rightAnswer = document.getElementById("infoRightAnswer");
let wrongAnswer = document.getElementById("infoWrongAnswer");
let questionLetter = document.getElementById("question_letter");
let questionScreen = document.getElementById("question_textID");
let barAnimationHTML = document.getElementById("barAnimation");
let rankingFirstPlayer = document.getElementById("rankingFirst"); 
let rankingSecondPlayer = document.getElementById("rankingSecond"); 
let rankingThirdPlayer = document.getElementById("rankingThird"); 
let rankingFull = document.getElementById("rankingID");

submit.disabled = true;
submit.style.opacity = "0.0";
pasapalabra.disabled = true;
pasapalabra.style.opacity = "0.0";
questionLetter.style.opacity = "0.0";
rankingFull.style.opacity = "0.0";

questionScreen.innerHTML =("Vas a empezar una fantástica partida de Pasapalabra. Pero lo primero, siempre es lo primero. ¿Cómo te llamas?")
document.getElementById("answerInput").value = "";

let numQuestions = Math.floor(Math.random()*3);

let namePlayer = "";
scoreRight = 0;
scoreWrong = 0;
wrongAnswer.innerHTML = scoreWrong;
rightAnswer.innerHTML = scoreRight;
let i = 0;
let answer = document.getElementById("answerInput").value;
let colorLetra = "";

let rankingArr = [
  {player: "Quico", score: 19},
  {player: "Lorena", score: 23}
];

buttonStart.onclick = function(){
  welcomePlayer();
}

//If click submit button.
//First checks if it's the end of a round and has to start over.
//Then, if question hasn´t been answered, go to the function round()
submit.onclick = function(){
  answer = document.getElementById("answerInput").value;
  answer = answer.toLowerCase();
  answer = answer.trim();
  round();
  console.log("i: " + i);
}

//If click Pasapalabra button.
pasapalabra.onclick = function(){
  document.getElementById("answerInput").value = ""
  answer = document.getElementById("answerInput").value;
  round();
}

const timeOut = () => {
  setTimeout(finishTime, 130000);
}

//Welcome the player and get the name.
const welcomePlayer = () => {
  namePlayer = document.getElementById("answerInput").value;    
  if (namePlayer === "" || namePlayer === null) {
    namePlayer = ("Anónimo");
  }
  
  questionScreen.innerHTML = (`Perfecto. Pues si te parece bien, ${namePlayer}, vamos a empezar. Tienes 130 segundos para completar El Rosco`);
  document.getElementById("answerInput").value = "";
  buttonStart.innerHTML =("EMPEZAR");
  
  buttonStart.onclick = function(){
    buttonStart.disabled = true;
    buttonStart.style.opacity = "0.0";
    submit.disabled = false;
    submit.style.opacity = "1.0";
    pasapalabra.disabled = false;
    pasapalabra.style.opacity = "1.0";
    questionLetter.style.opacity = "1.0";
    buttonStart.parentNode.removeChild(buttonStart);
    timeOut();
    barAnimationHTML.style.animation = "roundtime 130s";
    question_letter.innerHTML = questions[numQuestions][i].letter;
    questionScreen.innerHTML = questions[numQuestions][i].question;
  }
  return namePlayer;
}
let intervalAnswer;
const backWhite = () => {
  document.getElementById("answerInput").style.background = "rgb(255,255,255)";
  clearInterval(intervalAnswer);
}

//After the checkAnswer() function, show the next question on screen.
const round = () => {
  checkAnswer();
  i++;
  //if (i >= 27 || scoreRight+scoreWrong != 27){
  if (i >= 27){
    i = 0;
  }
  if (scoreRight+scoreWrong === 27) {
    clearTimeout();
    finishGame();
  } else {
    while (questions[numQuestions][i].status === 1) {
      i++;
      if (i >= 27 ) {
        i = 0;
      }
    }
  }
  if (scoreRight+scoreWrong < 27) {
    question_letter.innerHTML = questions[numQuestions][i].letter;
    questionScreen.innerHTML = questions[numQuestions][i].question;
    document.getElementById("answerInput").value = ""
  }
  return scoreRight, scoreWrong, i;
}

//Check if the answer is right, "pasapalabra" or wrong:
const checkAnswer = () => {
    if (answer === questions[numQuestions][i].answer){
      scoreRight ++;
      rightAnswer.innerHTML = scoreRight;
      questions[numQuestions][i].status = 1;
      colorLetra = questions[numQuestions][i].htmlID;
      document.getElementById(colorLetra).style.background = "linear-gradient(rgb(0,150,0), rgb(0,255,0))";
      document.getElementById("answerInput").style.background = "linear-gradient(rgb(150,0,0), rgb(0,255,0))";
      intervalAnswer = setInterval(backWhite, 500);
    } else if (answer === "pasapalabra" || answer === ""){

  } else {
    scoreWrong++;
    wrongAnswer.innerHTML = scoreWrong;
    questions[numQuestions][i].status = 1;
    colorLetra = questions[numQuestions][i].htmlID;
    document.getElementById(colorLetra).style.background = "linear-gradient(rgb(150,0,0), rgb(255,0,0))";
    document.getElementById("answerInput").style.background = "linear-gradient(rgb(250,0,0), rgb(150,0,0))";
    intervalAnswer = setInterval(backWhite, 500);
  }
  return scoreRight, scoreWrong, i, intervalAnswer;
}

const showRanking = () => {

  let player = { player: namePlayer, score: scoreRight };

  rankingArr.push(player);

  rankingArr.sort((a, b) => {
    return b.score - a.score;
  });
 
  console.log(rankingArr);

  rankingFull.style.opacity = "1.0";

  rankingFirstPlayer.innerHTML = rankingArr[0].player + "... " + rankingArr[0].score;
  rankingSecondPlayer.innerHTML = rankingArr[1].player + "... " + rankingArr[1].score;
  rankingThirdPlayer.innerHTML = rankingArr[2].player + "... " + rankingArr[2].score;

}

//This is what happen when you finish the game by answering all the questions (right or wrong):
const finishGame = () => {
  questionScreen.innerHTML = "El juego ha terminado! Enhorabuena (o no)";
  document.getElementById("answerInput").value = ""
  questionLetter.style.opacity = "0.0";
  submit.disabled = true;
  submit.style.opacity = "0.0";
  pasapalabra.disabled = true;
  pasapalabra.style.opacity = "0.0";
  showRanking();
}

//This is what happen when you run out of time:
const finishTime = () => {
  questionScreen.innerHTML = "Oooooh, el tiempo ha terminado.";
  questionLetter.style.opacity = "0.0";
  submit.disabled = true;
  submit.style.opacity = "0.0";
  pasapalabra.disabled = true;
  pasapalabra.style.opacity = "0.0";
}